<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1F416P0VQS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-1F416P0VQS');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Lab | Re:Birth 55</title>
    <meta name="description" content="50ä»£ã‹ã‚‰ã®ã‚¿ãƒƒãƒã‚¿ã‚¤ãƒ”ãƒ³ã‚°ç¿’å¾—è¨˜éŒ²ã€‚æ—¥ã€…ã®ç·´ç¿’ã¨å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’å…¬é–‹ã€‚">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âŒ¨ï¸</text></svg>">
</head>

<body>

    <header>
        <div class="container header-inner">
            <a class="active site-brand" href="index.html">
                <span>âŒ¨ï¸</span> Typing Lab <span
                    style="font-size: 0.8rem; color: #64748b; margin-left: 10px; font-weight: normal;">ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ã‚¿ãƒƒãƒã‚’ç¿’å¾—ã™ã‚‹
                    (v3.1)</span></a>
            <nav class="main-nav">
                <ul>
                    <li><a class="active" href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
                    <li><a class="nav-daily " href="category_daily.html">ç·´ç¿’</a></li>
                    <li><a class="nav-analysis " href="category_analysis.html">åˆ†æ</a></li>
                    <li><a class="nav-tools " href="category_tools.html">Typing Master Neo</a></li>
                    <li><a href="https://typingmasterneo.com" target="_blank"
                            style="background:#00796b; color:white; padding:5px 12px; border-radius:4px; font-weight:bold; display:inline-block; line-height:normal; margin-left:5px;">NEO</a>
                    </li>
                    <li><a class="" href="../../rebirth_parent/index.html">â† Project Hub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container main-layout">

        <!-- Main Content (Left) -->
        <main class="content-area">


            <!-- Latest Articles -->

            <!-- Compact Article List -->
            <div class="breadcrumb" style="font-size:0.9rem; color:var(--text-light); margin-bottom:1.5rem;">
                <a href="index.html" style="color:inherit; text-decoration:none;">ãƒ›ãƒ¼ãƒ </a> &gt; è¨˜äº‹ä¸€è¦§
            </div>

            <!-- Dashboard Cards (Synced via Bridge) -->
            <div class="dashboard-stats"
                style="display:flex; justify-content:space-between; align-items:center; gap:20px; margin-bottom:10px; background:#f8fafc; padding:25px; border-radius:12px; border:1px solid #e2e8f0;">
                <div class="stat-card" style="text-align:center; flex:1;">
                    <div style="font-size:0.8rem; color:#64748b; font-weight:bold; margin-bottom:8px;">ç·´ç¿’å›æ•°</div>
                    <div style="font-size:2.2rem; color:#3b82f6; font-weight:800; line-height:1;"><span
                            id="val-count">0</span><span
                            style="font-size:0.9rem; margin-left:3px; color:#64748b; font-weight:normal;">å›</span></div>
                </div>
                <div class="stat-card"
                    style="text-align:center; flex:1; border-left:1px solid #e2e8f0; border-right:1px solid #e2e8f0;">
                    <div style="font-size:0.8rem; color:#64748b; font-weight:bold; margin-bottom:8px;">åˆè¨ˆæ™‚é–“</div>
                    <div
                        style="font-size:2.2rem; color:#3b82f6; font-weight:800; line-height:1; word-break: break-word;">
                        <span id="val-time-str">0<span
                                style="font-size:0.9rem; color:#64748b; font-weight:normal; margin-left:2px;">ç§’</span></span>
                    </div>
                </div>
                <!-- <div class="stat-card" style="text-align:center; flex:1;">
                    <div style="font-size:0.8rem; color:#64748b; font-weight:bold; margin-bottom:8px;">BEST Score</div>
                    <div style="font-size:2.2rem; color:#3b82f6; font-weight:800; line-height:1;"><span
                            id="val-best">0</span></div>
                </div> -->
                <div style="display:flex; align-items:center; gap:10px;">
                    <button onclick="syncNeoData()"
                        style="background:#fff; color:#10b981; border:1px solid #10b981; padding:12px 20px; border-radius:8px; font-weight:bold; font-size:0.9rem; cursor:pointer; transition:all 0.2s;">
                        ğŸ”„ åŒæœŸ
                    </button>
                    <a href="https://typingmasterneo.com" target="_blank"
                        style="background:#10b981; color:#fff; padding:12px 20px; border-radius:8px; text-decoration:none; font-weight:bold; font-size:0.9rem; box-shadow:0 4px 6px rgba(16, 185, 129, 0.2); transition:transform 0.2s;">ğŸ“Š
                        Typing Master NEO</a>
                </div>
            </div>

            <!-- Empty State Message -->
            <div id="no-record-msg"
                style="text-align:center; color:#94a3b8; margin-bottom:40px; font-size:0.9rem; padding:10px;">
                è¨˜éŒ²ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚Œã‹ã‚‰ã®æ´»å‹•ã«æœŸå¾…ï¼
            </div>

            <!-- Bridge Iframe (Hidden) -->
            <iframe id="neo-bridge" src="https://typingmasterneo.com/bridge.html"
                style="display:none; width:0; height:0;"></iframe>

            <!-- Static Article List -->
            <div class="article-list">
                <article class="article-item" style="margin-bottom:1rem;">
                    <a href="post_9.html"
                        style="display:block; padding:1.5rem; background:#fff; border:1px solid #e2e8f0; border-radius:8px; text-decoration:none; color:inherit;">
                        <div style="font-size:0.85rem; color:#64748b; margin-bottom:0.5rem;">2026.01.03 â€¢ Roadmap</div>
                        <h3 style="font-size:1.2rem; margin-bottom:0.5rem;">ã€è¨ˆç”»ã€‘Typing Master Road Map 2026</h3>
                        <p style="font-size:0.95rem; color:#475569;">WPS 4.0ã¸ã®é“ã€‚æœ€çµ‚ç›®æ¨™ã¨ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã€‚</p>
                    </a>
                </article>
                <article class="article-item" style="margin-bottom:1rem;">
                    <a href="post_8.html"
                        style="display:block; padding:1.5rem; background:#fff; border:1px solid #e2e8f0; border-radius:8px; text-decoration:none; color:inherit;">
                        <div style="font-size:0.85rem; color:#64748b; margin-bottom:0.5rem;">2026.01.02 â€¢ Practice</div>
                        <h3 style="font-size:1.2rem; margin-bottom:0.5rem;">ä¸­ç´š1ã®è‹¦æˆ¦ã¨ã€ŒBã€ã®å£</h3>
                        <p style="font-size:0.95rem; color:#475569;">æ­£ã—ã„é‹æŒ‡ã¸ã®çŸ¯æ­£ã¨è‹¦é›£ã®è¨˜éŒ²ã€‚</p>
                    </a>
                </article>
            </div>

        </main>

        <!-- Sidebar (Right) -->
        <aside class="sidebar">

            <!-- Author Widget -->
            <div class="widget profile-widget">
                <div class="profile-img"></div> <!-- Placeholder image -->
                <h3 style="font-size:1.1rem; margin-bottom:0.5rem;">Admin 55</h3>
                <p style="font-size:0.9rem; color:var(--text-light); line-height:1.6;">
                    51æ­³ã‹ã‚‰ã®ã‚¹ã‚­ãƒ«ç²å¾—å®Ÿé¨“ä¸­ã€‚<br>ç¾åœ¨ã®ç›®æ¨™ï¼šWPM 100
                </p>
            </div>

            <!-- AdSense Widget (Top) -->
            <div class="widget">
                <h4 class="widget-label"
                    style="font-size:0.7rem; color:#999; margin-bottom:0.5rem; text-transform:uppercase;">Sponsored</h4>
                <div class="adsense-placeholder">
                    Ads Display
                </div>
            </div>

            <!-- Categories -->
            <div class="widget">
                <h3 class="widget-title">Categories</h3>
                <div id="category-list"></div>
            </div>

        </aside>

    </div>

    <footer class="child-footer">
        <div class="container">
            <p>&copy; 2025 Typing Lab | Re:Birth 55 Project <span id="visit-counter"
                    style="margin-left:10px; font-size:0.8rem; color:#888;">è¨ªå•æ•°ï¼š--</span></p>
        </div>
    </footer>

    <script>
        // --- Cross-Domain Data Bridge ---
        const bridge = document.getElementById('neo-bridge');

        // 1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ (Bridge -> Rebirth)
        window.addEventListener('message', (e) => {
            // å®‰å…¨ã®ãŸã‚ã€é€ä¿¡å…ƒã‚ªãƒªã‚¸ãƒ³ã‚’ç¢ºèªã—ã¦ã‚‚è‰¯ã„ãŒã€ç¾çŠ¶ã¯ç‰¹å®šã®å‡¦ç†ã®ã¿å®Ÿè¡Œ
            if (e.data.action === 'returnTypingData') {
                try {
                    const results = JSON.parse(e.data.data);
                    updateDashboard(results);
                } catch (err) {
                    console.error("Data parse error:", err);
                }
            }
        });

        // 2. Iframeèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«ãƒ‡ãƒ¼ã‚¿è¦æ±‚ (Rebirth -> Bridge)
        bridge.onload = () => {
            // postMessageã§NEOãƒ‰ãƒ¡ã‚¤ãƒ³ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡
            bridge.contentWindow.postMessage({ action: 'getTypingData' }, 'https://typingmasterneo.com');
        };

        // 3. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯
        function updateDashboard(results) {
            if (!results || results.length === 0) return;

            // ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ï¼‰
            localStorage.setItem('cached_typing_data', JSON.stringify(results));

            let totalTimeSec = 0;
            let count = results.length;

            results.forEach(r => {
                totalTimeSec += (r.timeLimit || 0);
            });

            // æ™‚é–“ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (å˜ä½ã‚’å°ã•ãæ•´å½¢)
            let timeHtml = "0<span style='font-size:0.9rem; color:#64748b; font-weight:normal; margin-left:2px;'>ç§’</span>";

            if (totalTimeSec > 0) {
                if (totalTimeSec < 60) {
                    timeHtml = `${totalTimeSec}<span style='font-size:0.9rem; color:#64748b; font-weight:normal; margin-left:2px;'>ç§’</span>`;
                } else {
                    const min = Math.floor(totalTimeSec / 60);
                    const sec = totalTimeSec % 60;
                    timeHtml = `${min}<span style='font-size:0.9rem; color:#64748b; font-weight:normal; margin-left:2px;'>åˆ†</span>`;
                    if (sec > 0) {
                        timeHtml += `${sec}<span style='font-size:0.9rem; color:#64748b; font-weight:normal; margin-left:2px;'>ç§’</span>`;
                    }
                }
            }

            // ... (WPM logic) ...

            // UIæ›´æ–°
            const valCount = document.getElementById('val-count');
            if (valCount) valCount.textContent = count;

            const valTime = document.getElementById('val-time-str');
            if (valTime) valTime.innerHTML = timeHtml; // Use innerHTML

            const valSpeed = document.getElementById('val-speed');
            if (valSpeed) valSpeed.textContent = currentWPM;

            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸éè¡¨ç¤º
            const msg = document.getElementById('no-record-msg');
            if (msg) msg.style.display = 'none';
        }

        // æ‰‹å‹•åŒæœŸãƒœã‚¿ãƒ³ (ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—çµŒç”±ã§å¼·åˆ¶å–å¾—)
        function syncNeoData() {
            const width = 400;
            const height = 300;
            const left = (window.screen.width - width) / 2;
            const top = (window.screen.height - height) / 2;

            window.open(
                'https://typingmasterneo.com/bridge.html?mode=popup',
                'neo_sync_popup',
                `width=${width},height=${height},top=${top},left=${left}`
            );
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚Œã°è¡¨ç¤º
        window.addEventListener('load', () => {
            const cached = localStorage.getItem('cached_typing_data');
            if (cached) {
                try {
                    updateDashboard(JSON.parse(cached));
                } catch (e) { }
            }
        });
    </script>

    <script src="sidebar.js"></script>
    <script src="counter.js"></script>
</body>

</html>