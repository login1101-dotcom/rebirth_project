<!DOCTYPE html>
<html lang="ja">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1F416P0VQS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-1F416P0VQS');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒ¼ã‚¿é€²æ— | Writer's Desk</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âœ’ï¸</text></svg>">
</head>

<body>
    <header>
        <div class="container header-inner">
            <a href="index.html" class="site-brand"><span>âœ’ï¸</span> Writer's Desk<span
                    style="font-size: 0.8rem; color: #64748b; margin-left: 10px; font-weight: normal;">å°èª¬å®¶ã‚„ã‚¨ãƒƒã‚»ã‚¤ã‚¹ãƒˆã«ãªã‚‹</span></a>
            <nav class="main-nav">
                <ul>
                    <li><a class=" " href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
                    <li><a class="nav-essay " href="category_essay.html">ã‚¨ãƒƒã‚»ã‚¤</a></li>
                    <li><a class="nav-short " href="category_short.html">å°èª¬</a></li>
                    <li><a class="nav-others " href="category_others.html">ãã®ä»–</a></li>
                    <li><a class="nav-view-data " href="view_data.html">ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</a></li>
                    <li><a class=" " href="../../index.html">â† Project Hub</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <div class="container main-layout">
        <main class="content-area">
            <!-- Authoring Progress Widget -->
            <section class="dashboard-card"
                style="display: block; margin-bottom: 2rem; padding: 0.5rem 2rem 2rem 2rem; background: #fff; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);">
                <header style="text-align: center; margin-bottom: 2rem;">
                    <h2
                        style="font-family: 'Noto Serif JP', serif; font-size: 1.5rem; color: #1e293b; display: inline-block; border-bottom: 3px solid #f59e0b; padding-bottom: 0.5rem;">
                        åŸ·ç­†æ´»å‹•ãƒ­ã‚°
                    </h2>
                    <p style="font-size: 0.9rem; color: #64748b; margin-top: 0.5rem;">Writing Activity Log & Stats</p>
                </header>

                <!-- Chart View -->
                <div id="chart-view">
                    <div style="position: relative; height: 350px; width: 100%;">
                        <canvas id="writingChart"></canvas>
                    </div>

                    <div
                        style="margin-top: 1.5rem; text-align: center; font-size: 0.85rem; color: #94a3b8; background: #f8fafc; padding: 0.75rem; border-radius: 6px;">
                        <span style="display: inline-block; margin: 0 10px;">ğŸ“Š <b>æ£’ã‚°ãƒ©ãƒ•</b>ï¼šæœˆé–“åŸ·ç­†æ–‡å­—æ•° (ç¶™ç¶šåŠ›)</span>
                        <span style="display: inline-block; margin: 0 10px;">ğŸ“ˆ <b>æŠ˜ã‚Œç·š</b>ï¼šç´¯ç©ä½œå“æ•° (é”æˆåŠ›)</span>
                        <span style="display: block; margin-top: 5px; color: #64748b; font-size: 0.75rem;">â€»
                            ã‚°ãƒ©ãƒ•ã®æ£’ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®æœˆã®æ—¥åˆ¥ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™</span>
                    </div>
                </div>

                <!-- Calendar Section (Hidden by default) -->
                <div id="calendar-wrapper" style="display: none; min-height: 350px; animation: fadeIn 0.3s ease;">
                    <h3 id="calendar-title"
                        style="text-align: center; font-size: 1.1rem; color: #3e2723; margin-bottom: 0.5rem;"></h3>
                    <div id="calendar-grid"
                        style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; max-width: 400px; margin: 0 auto; font-size: 0.85rem;">
                        <!-- Days -->
                    </div>
                    <div style="text-align: left; margin-top: 1rem;">
                        <button onclick="showChart()"
                            style="background: none; border: none; color: #64748b; cursor: pointer; font-family: inherit; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 5px; padding: 5px 0;">
                            <span>â†</span> å¹´é–“ã‚°ãƒ©ãƒ•ã«æˆ»ã‚‹
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Load Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <style>
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(5px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .cal-header {
                font-weight: bold;
                color: #94a3b8;
                text-align: center;
                padding-bottom: 5px;
            }

            .cal-day {
                aspect-ratio: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
                background: #f1f5f9;
                color: #64748b;
                transition: transform 0.1s;
            }

            .cal-day:hover {
                transform: scale(1.1);
                z-index: 10;
                cursor: pointer;
            }

            .cal-active {
                background-color: rgba(2, 132, 199, 0.7);
                color: white;
                font-weight: bold;
                box-shadow: 0 2px 4px rgba(2, 132, 199, 0.3);
            }

            .cal-empty {
                background: transparent;
            }
        </style>

        <script>
            const ctx = document.getElementById('writingChart').getContext('2d');

            const gradientBar = ctx.createLinearGradient(0, 0, 0, 350);
            gradientBar.addColorStop(0, 'rgba(56, 189, 248, 0.8)');
            gradientBar.addColorStop(1, 'rgba(2, 132, 199, 0.9)');

            const months = ['4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            const monthlyWords = [2500, 4200, 3800, 5000, 1200, 6000, 4500, 8000, 12500];
            const totalWorksEnd = [0, 1, 2, 2, 2, 3, 3, 3, 4];

            Chart.defaults.font.family = "'Noto Sans JP', sans-serif";
            Chart.defaults.color = '#64748b';

            const chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [
                        { label: 'æœˆé–“åŸ·ç­†æ–‡å­—æ•° (Words)', data: monthlyWords, backgroundColor: gradientBar, borderRadius: 4, barPercentage: 0.6, yAxisID: 'y', order: 2 },
                        { label: 'ç´¯ç©ä½œå“æ•° (Works)', data: totalWorksEnd, type: 'line', borderColor: '#d97706', backgroundColor: '#fbbf24', borderWidth: 3, pointBackgroundColor: '#fff', pointBorderColor: '#d97706', pointRadius: 6, pointHoverRadius: 8, tension: 0.3, yAxisID: 'y1', order: 1 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (e) => {
                        const points = chart.getElementsAtEventForMode(e, 'nearest', { intersect: true }, true);
                        if (points.length) {
                            showCalendar(months[points[0].index], points[0].index);
                        }
                    },
                    interaction: { mode: 'index', intersect: false },
                    plugins: { legend: { display: true, position: 'top', align: 'end' }, tooltip: { backgroundColor: 'rgba(30, 41, 59, 0.9)' } },
                    scales: {
                        x: { grid: { display: false } },
                        y: { type: 'linear', display: true, position: 'left', grid: { color: '#f1f5f9', borderDash: [5, 5] }, ticks: { callback: function (value) { return value / 1000 + 'k'; } } },
                        y1: { type: 'linear', display: true, position: 'right', min: 0, grid: { display: false }, ticks: { stepSize: 1, color: '#d97706' } }
                    }
                }
            });

            function showCalendar(monthName, monthIndex) {
                document.getElementById('chart-view').style.display = 'none';
                const wrapper = document.getElementById('calendar-wrapper');
                wrapper.style.display = 'block';

                const title = document.getElementById('calendar-title');
                title.textContent = `ğŸ“… ${monthName} ã®åŸ·ç­†è¨˜éŒ²`;
                title.innerHTML += `<br><span style="font-size:0.8rem; font-weight:normal; color:#64748b;">(è‰²ã®æ¿ƒã„æ—¥ã¯åŸ·ç­†é›†ä¸­æ—¥)</span>`;

                const grid = document.getElementById('calendar-grid');
                grid.innerHTML = '';

                ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'].forEach(d => {
                    const el = document.createElement('div');
                    el.className = 'cal-header';
                    el.textContent = d;
                    grid.appendChild(el);
                });

                const daysInMonth = 30;
                const startOffset = (monthIndex * 2) % 7;

                for (let i = 0; i < startOffset; i++) {
                    const el = document.createElement('div');
                    el.className = 'cal-empty';
                    grid.appendChild(el);
                }

                for (let i = 1; i <= daysInMonth; i++) {
                    const el = document.createElement('div');
                    el.className = 'cal-day';
                    el.textContent = i;
                    if (Math.random() > 0.4) {
                        el.classList.add('cal-active');
                        el.style.backgroundColor = `rgba(2, 132, 199, ${0.4 + (Math.random() * 0.6)})`;
                    }
                    grid.appendChild(el);
                }
            }

            function showChart() {
                document.getElementById('calendar-wrapper').style.display = 'none';
                document.getElementById('chart-view').style.display = 'block';
            }
        </script> display: true,
        position: 'right',
        min: 0,
        grid: { display: false },
        ticks: { stepSize: 1, color: '#d97706' }
        }
        }
        }
        });

        // --- Calendar Logic ---
        function showCalendar(monthName, monthIndex) {
        const wrapper = document.getElementById('calendar-wrapper');
        const title = document.getElementById('calendar-title');
        const grid = document.getElementById('calendar-grid');

        wrapper.style.display = 'block';
        wrapper.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        title.textContent = `ğŸ“… ${monthName} ã®åŸ·ç­†è¨˜éŒ²`;
        title.innerHTML += `<br><span
            style="font-size:0.8rem; font-weight:normal; color:#64748b;">(è‰²ã®æ¿ƒã„æ—¥ã¯åŸ·ç­†é›†ä¸­æ—¥)</span>`;

        grid.innerHTML = '';

        // Header (Mo, Tu, ...)
        const days = ['æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ', 'æ—¥'];
        days.forEach(d => {
        const el = document.createElement('div');
        el.className = 'cal-header';
        el.textContent = d;
        grid.appendChild(el);
        });

        // Generate random "activity" for demo
        // Assuming 30 days for simplicity in this demo
        const daysInMonth = 30;
        const startOffset = (monthIndex * 2) % 7; // Fake offset shift

        for (let i = 0; i < startOffset; i++) { const el=document.createElement('div'); el.className='cal-empty' ;
            grid.appendChild(el); } for (let i=1; i <=daysInMonth; i++) { const el=document.createElement('div');
            el.className='cal-day' ; el.textContent=i; // Demo Logic: Randomly assign activity levels if (Math.random()>
            0.4) {
            el.classList.add('cal-active');
            // Random opacity for heatmap effect
            const intensity = 0.4 + (Math.random() * 0.6);
            el.style.backgroundColor = `rgba(2, 132, 199, ${intensity})`;
            }

            grid.appendChild(el);
            }
            }
            </script>

            <aside class="sidebar">

                <!-- Author Widget -->
                <div class="widget profile-widget">
                    <div class="profile-img"></div> <!-- Placeholder image -->
                    <h3 style="font-size:1.1rem; margin-bottom:0.5rem;">Writer 55</h3>
                    <p style="font-size:0.9rem; color:var(--text-light); line-height:1.6;">
                        ç‰©èªã‚’ç´¡ãå®Ÿé¨“ä¸­ã€‚<br>ç¾åœ¨ã®ç›®æ¨™ï¼šæ–°äººè³å¿œå‹Ÿ
                    </p>
                </div>

                <!-- AdSense Widget (Top) -->
                <div class="widget">
                    <h4 class="widget-label"
                        style="font-size:0.7rem; color:#999; margin-bottom:0.5rem; text-transform:uppercase;">Sponsored
                    </h4>
                    <div class="adsense-placeholder">
                        Ads Display
                    </div>
                </div>

                <!-- Categories -->
                <div class="widget">
                    <h3 class="widget-title">Categories</h3>
                    <div id="category-list"></div>
                </div>

            </aside>
    </div>
    <footer class="child-footer">
        <div class="container">
            <p>&copy; 2025 Typing Lab | Re:Birth 55 Project <span id="visit-counter"
                    style="margin-left:10px; font-size:0.8rem; color:#888;">è¨ªå•æ•°ï¼š--</span></p>
        </div>
    </footer>
    <script src="sidebar.js"></script>
    <script src="counter.js"></script>
</body>

</html>